# TRD: JsonWebLog

## 📋 개요

Rust로 구현한 실시간 로그 모니터링 애플리케이션이다.

## 🎯 목표

### 주요 요구사항

1. **실시간 로그 모니터링**: Jsonl 형태의 로그를 표준 입력으로 받아 즉시 UI 업데이트
2. **고성능 필터링**: 대용량 로그에서 빠른 검색 및 필터링
3. **사용자 친화적 UI**: 직관적이고 반응형 인터페이스
4. **안정적인 자동 새로고침**: 깜빡임 없는 부드러운 업데이트

### 주요 특징

- **성능 최적화**: 가상화된 테이블로 대용량 로그 처리
- **키 값을 이용한 테이블 정의**: Jsonl 로그 메시지의 키 값을 이용한 테이블 동적 정의
- **실시간 업데이트**: 실시간 로그 스트리밍
- **사용자 경험**: 부드러운 애니메이션과 반응형 디자인
- **사용자 규칙**: 날짜 및 시간 출력 형식 정의, 필드 값에 따른 색상 정의 규칙 편집
- **사용자 설정**: 사용자 규칙 등 다양한 설정 값의 저장 및 복원

## 🎨 UI/UX 설계

### 레이아웃 구조

```text
┌────────────────────────────────────────────────────────────┐
│ Header: JsonWebLog | View | Settings                       │
├────────────────────────────────────────────────────────────┤
│ Filter Panel:                                              │
│ [Level] [Search] [Logger] [Module] [Date Range] [Clear]    │
├────────────────────────────────────────────────────────────┤
│ Log Table:                                                 │
│ Line | Time | Level | Logger | Message | Module | Function │
│ ──────────────────────────────────────────────────-─────── │
│ 001  | 12:34| INFO  | main   | Started  | app.py | main()  │
│ 002  | 12:35| ERROR | db     | Failed   | db.py  | connect │
│ ...  | .... | ....  | ....   | ........ | ...... | ....... │
└────────────────────────────────────────────────────────────┘
```

## 성능 최적화

1. **가상화된 테이블**: 가상화 테이블로 대용량 로그의 빠르고 부드러운 렌더링
2. **디바운스된 검색**: 300ms 지연으로 검색 성능 향상
3. **메모이제이션**: 불필요한 리렌더링 방지
4. **청킹**: 점진적 로딩과 빠른 사용자 반응
5. **스트리밍 파싱**: 표준 입력을 이용한 점진적인 파싱
6. **인덱싱**: 로그 레벨, 타임스탬프 등 주요 필드의 자동 인덱스 구축
7. **캐시**: 자주 사용되는 필터 결과 캐시

### 메모리 관리

- **순환 버퍼**: 최대 로그 엔트리 수 제한 (기본 100,000개)
- **Lazy Loading**: 화면에 보이는 부분만 렌더링
- **정리 정책**: 오래된 로그 자동 정리

## 성능 목표

### 응답 시간

- 초기 로딩: < 1초
- 로그 업데이트: < 100ms
- 검색/필터링: < 200ms

---

**작성일**: 2025-07-31
**작성자**: Claude Code
**버전**: 1.0
